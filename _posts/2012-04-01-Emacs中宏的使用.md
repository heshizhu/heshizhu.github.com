---
layout: article
title: Emacs中宏的使用
---
Tags: Tool, Emacs#标签
Category: Tool#工具

总认为会使用宏的人才算是真正的emacser。后来看到plaskid在其博客中说使用了emacs一年后才开始学习使用宏，所以这条规则也不普遍使用。

宏就是一套命令或动作的重复使用。
定义宏就是定义这样一套命令和动作。
使用宏就是对于一个文本,网页,等等使用这样一个宏。

宏的应用应该说是很广泛， 可以用于文本的批量处理(如在每行加入“;”)，查询替换，批量发送邮件等等... 

下面记录下刚学习到的Emacs中宏的定义和使用方法
<!--more-->


宏的定义: 
1. C-x (  #开始定义宏
2. ......   #一套你想重复使用的操作，即宏,比如C-e ; C-n #表示跳到行尾，加";",跳到下一行
3. C-x )  #结束宏定义

宏的使用: 
1. C-x e #使用宏，注意，这里只对该行使用，如果你希望对整个文本每行行尾都加入;那么使用下面的命令
2. 注：*Emacs中C-u 10 command 表示对command执行10次,C-u 默认执行4次，C-u C-u 执行pow(4,2)次,C-u C-u C-u C-u 执行pow(4,4)次*
3. 那么下面的命令可以对刚定义的宏执行50次  
> C-u 50 C-x e 
> M 50 C-x e 也可以，注意，先按住M(ALT或ESC键)不放，然后输入50，然后松开M，再输入C-x e

与宏相关的其他命令
{% highlight console %}
C-x u #撤销整个宏命令，类似于C-g
 M-x name-last-kdb-macro #保存宏
 C-x C-f filename#保存到文件中 
{% endhighlight %}
